version: '3.8'

services:
  claude:
      build:
            context: .
                  dockerfile: Dockerfile
                      container_name: claude-app
                          environment:
                                - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
                                      - PYTHONUNBUFFERED=1
                                            - PYTHONDONTWRITEBYTECODE=1
                                                volumes:
                                                      - .:/app
                                                            - claude_cache:/root/.cache
                                                                ports:
                                                                      - "8000:8000"
                                                                          restart: unless-stopped
                                                                              healthcheck:
                                                                                    test: ["CMD", "python", "-c", "import anthropic; print('OK')"]
                                                                                          interval: 30s
                                                                                                timeout: 10s
                                                                                                      retries: 3
                                                                                                            start_period: 5s
                                                                                                                networks:
                                                                                                                      - claude_network
                                                                                                                      
                                                                                                                      volumes:
                                                                                                                        claude_cache:
                                                                                                                            driver: local
                                                                                                                            
                                                                                                                            networks:
                                                                                                                              claude_network:
                                                                                                                                  driver: bridge
